version: "1.0"
info:
  id: "si-sodo-reduxi"
  name: "SODO / Reduxi"
  distributer: "Ni pomembno"
  country: "Slovenia"
  supported_interfaces:
    - "SERIAL"
    - "TCP"
    - "P1"
  multiple_telegrams: true
  required_keys:
    - "SERIAL_NUMBER"

transformations:
  - type: "MULTIPLY"
    key: "VOLTAGE_L1"
    value: 0.1
  - type: "MULTIPLY"
    key: "VOLTAGE_L2"
    value: 0.1
  - type: "MULTIPLY"
    key: "VOLTAGE_L3"
    value: 0.1
  - type: "MULTIPLY"
    key: "CURRENT_L1"
    value: 0.01
  - type: "MULTIPLY"
    key: "CURRENT_L2"
    value: 0.01
  - type: "MULTIPLY"
    key: "CURRENT_L3"
    value: 0.01
  - type: "MULTIPLY"
    key: "FREQUENCY"
    value: 0.01
  - type: "MULTIPLY_IF_KEY"
    key: "ACTIVE_POWER_EXPORT_L1"
    operand: "GT"
    value: 0
    multiplier: -1
    transform_key: "CURRENT_L1"
  - type: "MULTIPLY_IF_KEY"
    key: "ACTIVE_POWER_EXPORT_L2"
    operand: "GT"
    value: 0
    multiplier: -1
    transform_key: "CURRENT_L2"
  - type: "MULTIPLY_IF_KEY"
    key: "ACTIVE_POWER_EXPORT_L3"
    operand: "GT"
    value: 0
    multiplier: -1
    transform_key: "CURRENT_L3"

telegrams:
  - name: "LIVE_DATA"
    length: 23
    has_obis: true
    contents: 
      - position: 0
        name: "SERIAL_NUMBER"
        type: "OctetString"
        obis: "0-0:96.1.1"
      - position: 1
        name: "SERVER_ID"
        type: "OctetString"
        obis: null
      - position: 2
        name: "ACTIVE_POWER_IMPORT"
        type: "UInt32"
        obis: "1-0:1.7.0"
      - position: 3
        name: "ACTIVE_POWER_EXPORT"
        type: "UInt32"
        obis: "1-0:2.7.0"
      - position: 4
        name: "REACTIVE_POWER_IMPORT"
        type: "UInt32"
        obis: "1-0:3.7.0"
      - position: 5
        name: "REACTIVE_POWER_EXPORT"
        type: "UInt32"
        obis: "1-0:4.7.0"
      - position: 6
        name: "ACTIVE_ENERGY_IMPORT"
        type: "UInt32"
        obis: "1-0:1.8.0"
      - position: 7
        name: "ACTIVE_ENERGY_EXPORT"
        type: "UInt32"
        obis: "1-0:2.8.0"
      - position: 8
        name: "REACTIVE_ENERGY_IMPORT"
        type: "UInt32"
        obis: "1-0:3.8.0"
      - position: 9
        name: "REACTIVE_ENERGY_EXPORT"
        type: "UInt32"
        obis: "1-0:4.8.0"
      - position: 10
        name: "FREQUENCY"
        type: "UInt16"
        obis: "1-0:14.7.0"
      - position: 11
        name: "CURRENT_L1"
        type: "UInt16"
        obis: "1-0:31.7.0"
      - position: 12
        name: "CURRENT_L2"
        type: "UInt16"
        obis: "1-0:51.7.0"
      - position: 13
        name: "CURRENT_L3"
        type: "UInt16"
        obis: "1-0:71.7.0"
      - position: 14
        name: "VOLTAGE_L1"
        type: "UInt16"
        obis: "1-0:32.7.0"
      - position: 15
        name: "VOLTAGE_L2"
        type: "UInt16"
        obis: "1-0:52.7.0"
      - position: 16
        name: "VOLTAGE_L3"
        type: "UInt16"
        obis: "1-0:72.7.0"
      - position: 17
        name: "ACTIVE_POWER_IMPORT_L1"
        type: "UInt32"
        obis: "1-0:21.7.0"
      - position: 18
        name: "ACTIVE_POWER_IMPORT_L2"
        type: "UInt32"
        obis: "1-0:41.7.0"
      - position: 19
        name: "ACTIVE_POWER_IMPORT_L3"
        type: "UInt32"
        obis: "1-0:61.7.0"
      - position: 20
        name: "ACTIVE_POWER_EXPORT_L1"
        type: "UInt32"
        obis: "1-0:22.7.0"
      - position: 21
        name: "ACTIVE_POWER_EXPORT_L2"
        type: "UInt32"
        obis: "1-0:42.7.0"
      - position: 22
        name: "ACTIVE_POWER_EXPORT_L3"
        type: "UInt32"
        obis: "1-0:62.7.0"
  - name: "LIVE_DATA_"
    length: 22
    has_obis: true
    contents:
      - position: 0
        name: "SERIAL_NUMBER"
        type: "OctetString"
        obis: "0-0:96.1.1"
      - position: 1
        name: "ACTIVE_POWER_IMPORT"
        type: "UInt32"
        obis: "1-0:1.7.0"
      - position: 2
        name: "ACTIVE_POWER_EXPORT"
        type: "UInt32"
        obis: "1-0:2.7.0"
      - position: 3
        name: "REACTIVE_POWER_IMPORT"
        type: "UInt32"
        obis: "1-0:3.7.0"
      - position: 4
        name: "REACTIVE_POWER_EXPORT"
        type: "UInt32"
        obis: "1-0:4.7.0"
      - position: 5
        name: "ACTIVE_ENERGY_IMPORT"
        type: "UInt32"
        obis: "1-0:1.8.0"
      - position: 6
        name: "ACTIVE_ENERGY_EXPORT"
        type: "UInt32"
        obis: "1-0:2.8.0"
      - position: 7
        name: "REACTIVE_ENERGY_IMPORT"
        type: "UInt32"
        obis: "1-0:3.8.0"
      - position: 8
        name: "REACTIVE_ENERGY_EXPORT"
        type: "UInt32"
        obis: "1-0:4.8.0"
      - position: 9
        name: "FREQUENCY"
        type: "UInt16"
        obis: "1-0:14.7.0"
      - position: 10
        name: "CURRENT_L1"
        type: "UInt16"
        obis: "1-0:31.7.0"
      - position: 11
        name: "CURRENT_L2"
        type: "UInt16"
        obis: "1-0:51.7.0"
      - position: 12
        name: "CURRENT_L3"
        type: "UInt16"
        obis: "1-0:71.7.0"
      - position: 13
        name: "VOLTAGE_L1"
        type: "UInt16"
        obis: "1-0:32.7.0"
      - position: 14
        name: "VOLTAGE_L2"
        type: "UInt16"
        obis: "1-0:52.7.0"
      - position: 15
        name: "VOLTAGE_L3"
        type: "UInt16"
        obis: "1-0:72.7.0"
      - position: 16
        name: "ACTIVE_POWER_IMPORT_L1"
        type: "UInt32"
        obis: "1-0:21.7.0"
      - position: 17
        name: "ACTIVE_POWER_IMPORT_L2"
        type: "UInt32"
        obis: "1-0:41.7.0"
      - position: 18
        name: "ACTIVE_POWER_IMPORT_L3"
        type: "UInt32"
        obis: "1-0:61.7.0"
      - position: 19
        name: "ACTIVE_POWER_EXPORT_L1"
        type: "UInt32"
        obis: "1-0:22.7.0"
      - position: 20
        name: "ACTIVE_POWER_EXPORT_L2"
        type: "UInt32"
        obis: "1-0:42.7.0"
      - position: 21
        name: "ACTIVE_POWER_EXPORT_L3"
        type: "UInt32"
        obis: "1-0:62.7.0"
  - name: "USAGE_DATA"
    length: 12
    has_obis: false
    contents:
      - position: 0
        name: "SERIAL_NUMBER"
        type: "OctetString"
      - position: 1
        name: "SERVER_ID"
        type: "OctetString"
      - position: 2
        name: "POSS__SUPPORTS_15_MINUTE_UPDATES"
        type: "Boolean"
      - position: 3
        name: "SEND_BLOCK"
        type: "OctetString"
      - position: 4
        name: "ACTIVE_ENERGY_IMPORT"
        type: "UInt32"
      - position: 5
        name: "ACTIVE_ENERGY_IMPORT_T1"
        type: "UInt32"
      - position: 6
        name: "ACTIVE_ENERGY_IMPORT_T2"
        type: "UInt32"
      - position: 7
        name: "ACTIVE_ENERGY_EXPORT"
        type: "UInt32"
      - position: 8
        name: "ACTIVE_ENERGY_EXPORT_T1"
        type: "UInt32"
      - position: 9
        name: "ACTIVE_ENERGY_EXPORT_T2"
        type: "UInt32"
      - position: 10
        name: "REACTIVE_ENERGY_IMPORT"
        type: "UInt32"
      - position: 11
        name: "REACTIVE_ENERGY_EXPORT"
        type: "UInt32"
  - name: "USAGE_DATA_"
    length: 12
    has_obis: false
    contents:
      - position: 0
        name: "SERIAL_NUMBER"
        type: "OctetString"
      - position: 1
        name: "SERVER_ID"
        type: "OctetString"
      - position: 2
        name: "POSS__SUPPORTS_15_MINUTE_UPDATES"
        type: "Enum"
      - position: 3
        name: "SEND_BLOCK"
        type: "OctetString"
      - position: 4
        name: "ACTIVE_ENERGY_IMPORT"
        type: "UInt32"
      - position: 5
        name: "ACTIVE_ENERGY_IMPORT_T1"
        type: "UInt32"
      - position: 6
        name: "ACTIVE_ENERGY_IMPORT_T2"
        type: "UInt32"
      - position: 7
        name: "ACTIVE_ENERGY_EXPORT"
        type: "UInt32"
      - position: 8
        name: "ACTIVE_ENERGY_EXPORT_T1"
        type: "UInt32"
      - position: 9
        name: "ACTIVE_ENERGY_EXPORT_T2"
        type: "UInt32"
      - position: 10
        name: "REACTIVE_ENERGY_IMPORT"
        type: "UInt32"
      - position: 11
        name: "REACTIVE_ENERGY_EXPORT"
        type: "UInt32"

